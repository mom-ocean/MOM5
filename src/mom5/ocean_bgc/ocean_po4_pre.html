<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=EUC-JP">
<title>Module ocean_po4_pre_mod</title>
<link type="text/css" href="http://data1.gfdl.noaa.gov/~fms/style/docbook.css" rel="stylesheet">
<STYLE TYPE="text/css">
          .fixed {
            font-size:medium;
            font-family:monospace;
            border-style:none;
            border-width:0.1em;
            padding:0.1em;
            color:#663366;
          }
        </STYLE>
</head>
<body>
<a name="TOP"></a><font class="header" size="1"><a href="#PUBLIC INTERFACE">PUBLIC INTERFACE </a>

          ~ <a href="#PUBLIC ROUTINES">PUBLIC ROUTINES </a></font>
<hr>
<h2>Module ocean_po4_pre_mod</h2>
<a name="HEADER"></a>
<!-- BEGIN HEADER -->
<div>
<b>Contact:&nbsp;</b><a href="mailto:GFDL.Climate.Model.Info@noaa.gov"> Jennifer Simeon
</a>
<br>
<b>Reviewers:&nbsp;</b><a href="mailto:GFDL.Climate.Model.Info@noaa.gov"> Eric Galbraith
</a>
<br>
<b>Change History:&nbsp;</b><a href="http://cobweb.gfdl.noaa.gov/fms-cgi-bin/viewcvs/FMS/ocean/mom5/ocean_bgc">WebCVS Log</a>
<br>
<br>
</div>
<!-- END HEADER -->
<a name="OVERVIEW"></a>
<hr>
<h4>OVERVIEW</h4>
<!-- BEGIN OVERVIEW -->
<p class="text">
 Add-on ocean biogeochemistry module
</p>
<!-- END OVERVIEW -->
<a name="DESCRIPTION"></a>
<!-- BEGIN DESCRIPTION -->
<div>
 This module has simple implementation of preformed phosphate.
 Where,
    po4_pre=po4, if z &lt;= mld

 It is an optional package that requires TOPAZ, ocmip2_biotic, or ocean_bgc_restore to be running.

 Various mixed layer depth options are available and can be
 set via namelist

         1 = kpp mixed layer (default)
         2 = buoyancy criteria defined mixed layer, where this buoyancy
              references in situ density
         3 = buoyancy criteria defined mixed layer, where this buoyancy 
              references potential density

</div>
<br>
<!-- END DESCRIPTION -->
<a name="OTHER MODULES USED"></a>
<hr>
<h4>OTHER MODULES USED</h4>
<!-- BEGIN OTHER MODULES USED -->
<div>
<pre>    field_manager_mod<br>              mpp_mod<br>              fms_mod<br>     time_manager_mod<br>      mpp_domains_mod<br>   ocean_tpm_util_mod<br>          fm_util_mod<br>      ocean_types_mod<br>ocean_tracer_diag_mod<br>     diag_manager_mod</pre>
</div>
<!-- END OTHER MODULES USED -->
<!-- BEGIN PUBLIC INTERFACE -->
<a name="PUBLIC INTERFACE"></a>
<hr>
<h4>PUBLIC INTERFACE</h4>
<div>
<dl>
<dt>
<a href="#allocate_arrays">allocate_arrays</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_bbc">ocean_po4_pre_bbc</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_end">ocean_po4_pre_end</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_sbc">ocean_po4_pre_sbc</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_flux_init">ocean_po4_pre_flux_init</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_init">ocean_po4_pre_init</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_init_sfc">ocean_po4_pre_init_sfc</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_sum_sfc">ocean_po4_pre_sum_sfc</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_zero_sfc">ocean_po4_pre_zero_sfc</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_avg_sfc">ocean_po4_pre_avg_sfc</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_sfc_end">ocean_po4_pre_sfc_end</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_source">ocean_po4_pre_source</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_start">ocean_po4_pre_start</a>:</dt>
<dd></dd>
<dt>
<a href="#ocean_po4_pre_tracer">ocean_po4_pre_tracer</a>:</dt>
<dd></dd>
<dt>
<a href="#set_array">set_array</a>:</dt>
<dd></dd>
</dl>
</div>
<br>
<!-- END PUBLIC INTERFACE -->
<a name="PUBLIC ROUTINES"></a>
<hr>
<h4>PUBLIC ROUTINES</h4>
<!-- BEGIN PUBLIC ROUTINES -->
<ol type="a">
<li>
<a name="allocate_arrays"></a>
<h4>allocate_arrays</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
     Dynamically allocate arrays
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_bbc"></a>
<h4>ocean_po4_pre_bbc</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
     calculate the surface boundary conditions
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_end"></a>
<h4>ocean_po4_pre_end</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
     Clean up various PO4_PRE quantities for this run.
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_sbc"></a>
<h4>ocean_po4_pre_sbc</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
     Calculate the surface boundary conditions
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_flux_init"></a>
<h4>ocean_po4_pre_flux_init</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
       Set up any extra fields needed by the ocean-atmosphere gas fluxes
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_init"></a>
<h4>ocean_po4_pre_init</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
       Set up any extra fields needed by the tracer packages

       Save pointers to various "types", such as Grid and Domains.
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_init_sfc"></a>
<h4>ocean_po4_pre_init_sfc</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
       Initialize surface fields for flux calculations

       Note: this subroutine should be merged into ocean_po4_pre_start
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_sum_sfc"></a>
<h4>ocean_po4_pre_sum_sfc</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
       Sum surface fields for flux calculations
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_zero_sfc"></a>
<h4>ocean_po4_pre_zero_sfc</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
       Sum surface fields for flux calculations
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_avg_sfc"></a>
<h4>ocean_po4_pre_avg_sfc</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
       Sum surface fields for flux calculations
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_sfc_end"></a>
<h4>ocean_po4_pre_sfc_end</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
       Finish up stuff for surface fields for flux calculations
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_source"></a>
<h4>ocean_po4_pre_source</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
     compute the source terms for the PO4_PREs, including boundary
     conditions (not done in setvbc, to minimize number
     of hooks required in MOM base code)
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_start"></a>
<h4>ocean_po4_pre_start</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
 Initialize variables, read in namelists, calculate constants for a given run
 and allocate diagnostic arrays
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="ocean_po4_pre_tracer"></a>
<h4>ocean_po4_pre_tracer</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
     Perform things that should be done in tracer, but are done here
 in order to minimize the number of hooks necessary in the MOM4 basecode
 </dd>
<br>
<br>
</dl>
</li>
<li>
<a name="set_array"></a>
<h4>set_array</h4>
<dl>
<dt>
<b>DESCRIPTION</b>
</dt>
<dd>
       Set up an array covering the model domain with a user-specified
       value, in user-specified regions. There are a given number of
       2-d regions specified by the values slat, nlat, wlon and elon.
       The longitudes are for a cyclic domain, and if wlon and elon
       are on opposite sides of the cut, the correct thing will
       be done. Elon is considered to be east of wlon, so if elon is
       less than wlon, then the region east of elon to the cut will be
       filled, and the region from the cut to wlon will be filled.

       After setting up the array in this routine, it may prove useful
       to allow fine-tuning the settings via an array in a namelist.

       Arguments:
         Input:
      num_regions = number of user-specified regions which will be
                    filled

             wlon = 1-d array of western (starting) longitudes for the
                    rectangular regions

             elon = 1-d array of eastern (ending) longitudes for the
                    rectangular regions

             slat = 1-d array of southern (starting) latitudes for the
                    rectangular regions

             nlat = 1-d array of northern (ending) latitudes for the
                    rectangular regions

                       Note: if slat &gt;= nlat, then nothing is done
                             for that region

        set_value = the value to assign to array in the user-specified
                    regions

      unset_value = the value to assign to array outside of the
                    user-specified regions

             name = character variable used in informative messages

     coastal_only = true to limit changes only to coastal points
                    (i.e., at least one bordering point is land)

         Output:

            array = 2-d array which will contain the set- and unset-
                    values. The array is assumed to have a border
                    one unit wide on all edges, ala MOM. A cyclic
                    boundary condition will be set if requested.
 </dd>
<br>
<br>
</dl>
</li>
</ol>
<!-- END PUBLIC ROUTINES -->
<a name="PUBLIC TYPES"></a>
<!-- BEGIN PUBLIC TYPES -->
<!-- END PUBLIC TYPES --><a name="PUBLIC CODE"></a>
<!-- BEGIN PUBLIC CODE -->
<!-- END PUBLIC CODE --><a name="REFERENCES"></a>
<hr>
<h4>REFERENCES</h4>
<!-- BEGIN REFERENCES -->
<div>
<ol>
<li>
 No reference yet.
 </li>
</ol>
</div>
<br>
<!-- END REFERENCES -->
<hr>
<div align="right">
<font size="-1"><a href="#TOP">top</a></font>
</div>
</body>
</html>
